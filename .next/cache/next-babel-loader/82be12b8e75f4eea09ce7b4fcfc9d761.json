{"ast":null,"code":"import AV from 'leancloud-storage';\nexport var createCollect = function createCollect() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return new Promise(function (resolve, reject) {\n    var collects = new AV.Object('CMS_Collects');\n    collects.set('user', AV.User.current());\n    collects.set('article', params.article); // 将对象保存到云端\n\n    collects.save().then(function (res) {\n      resolve(res);\n    }, function (error) {\n      // 异常处理\n      reject(error);\n    });\n  });\n};\nexport var deleteCollect = function deleteCollect() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return new Promise(function (resolve, reject) {\n    params.item.destroy().then(function () {\n      resolve();\n    });\n  });\n};\nexport var countCollect = function countCollect() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return new Promise(function (resolve, reject) {\n    var query = new AV.Query('CMS_Collects'); // query.equalTo('user', AV.User.current())\n\n    query.equalTo('article', params.article);\n    query.count().then(function (number) {\n      resolve(number);\n    });\n  });\n};\nexport var getMyCollect = function getMyCollect() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return new Promise(function (resolve, reject) {\n    var query = new AV.Query('CMS_Collects');\n    query.equalTo('user', AV.User.current());\n    query.equalTo('article', params.article);\n    query.first().then(function (res) {\n      resolve(res);\n    })[\"catch\"](function (err) {\n      reject(err);\n    });\n  });\n};\nexport var getCollectList = function getCollectList() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return new Promise(function (resolve, reject) {\n    var query = new AV.Query('CMS_Collects');\n    query.equalTo('user', params.user);\n    query.include('article');\n    query.include('article.author');\n    query.find().then(function (res) {\n      resolve(res);\n    })[\"catch\"](function (err) {\n      reject(err);\n    });\n  });\n};","map":null,"metadata":{},"sourceType":"module"}