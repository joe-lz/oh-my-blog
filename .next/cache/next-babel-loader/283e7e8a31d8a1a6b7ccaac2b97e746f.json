{"ast":null,"code":"var __jsx = React.createElement;\nimport Head from \"next/head\";\nimport Link from \"next/link\";\nimport AV from \"leancloud-storage\";\nimport dayjs from \"dayjs\";\nimport { useRouter } from \"next/router\";\nimport React, { useState, useEffect } from \"react\";\nimport { Menu, Dropdown } from \"antd\";\nimport styles from \"./index.module.scss\";\nimport Login from \"../Login\";\nComponents.defaultProps = {\n  menus: [],\n  profile: null,\n  userinfo: null\n};\n\nfunction Components(props) {\n  const {\n    userinfo,\n    menus,\n    profile\n  } = props;\n  const curUser = AV.User.current();\n  const {\n    0: curMenu,\n    1: setcurMenu\n  } = useState(null);\n\n  const menu = __jsx(React.Fragment, null, userinfo && __jsx(Menu, null, __jsx(Menu.Item, null, __jsx(Link, {\n    href: `/www/user/${userinfo.objectId}`\n  }, \"\\u6211\\u7684\\u9996\\u9875\")), __jsx(Menu.Item, null, __jsx(Link, {\n    href: \"/www/center\"\n  }, \"\\u521B\\u4F5C\\u4E2D\\u5FC3\")), __jsx(Menu.Item, {\n    danger: true,\n    onClick: () => {\n      localStorage.clear();\n      sessionStorage.clear();\n      window.location.reload();\n    }\n  }, \"\\u9000\\u51FA\\u767B\\u5F55\")));\n\n  const router = useRouter();\n  useEffect(() => {\n    if (router) {\n      menus.map(obj => {\n        if (router.query.cate1 === obj.key) {\n          setcurMenu(obj);\n        }\n\n        return obj;\n      });\n    }\n  }, [router]);\n  return __jsx(\"div\", null, __jsx(Head, null, profile && __jsx(\"title\", null, profile.title || \"oh my blog\", curMenu ? `-${curMenu.title}` : \"\", router.pathname.includes(\"www/home\") ? \"-首页\" : \"\", router.pathname.includes(\"www/posts\") ? `-${profile.blogName}` : \"\")), __jsx(\"div\", {\n    className: styles.nav1\n  }, __jsx(\"div\", {\n    className: styles.nav\n  }, __jsx(\"div\", {\n    className: styles.nav_logo,\n    style: {\n      backgroundImage: `url(${profile.logo})`\n    }\n  }), __jsx(\"div\", {\n    className: styles.nav_link\n  }, __jsx(Link, {\n    href: \"/www/home\"\n  }, __jsx(\"div\", {\n    className: router.pathname.includes(\"www/home\") ? styles.nav_link_item_active : styles.nav_link_item\n  }, \"\\u9996\\u9875\")), menus.map(obj => {\n    let toLink = `/www/alist?cate1=${obj.key}`; // if (obj.children && obj.children.length > 0) {\n    //   toLink = `/www/alist?cate1=${obj.key}&cate2=${obj.children[0].key}`\n    // }\n\n    return __jsx(Link, {\n      href: toLink,\n      key: obj.key\n    }, __jsx(\"div\", {\n      className: router.query.cate1 === obj.key ? styles.nav_link_item_active : styles.nav_link_item,\n      key: obj.key\n    }, obj.title));\n  }), profile.showBlog && __jsx(Link, {\n    href: \"/www/posts\"\n  }, __jsx(\"div\", {\n    className: router.pathname.includes(\"www/posts\") ? styles.nav_link_item_active : styles.nav_link_item\n  }, profile.blogName))), curUser ? __jsx(Dropdown, {\n    overlay: menu,\n    arrow: true,\n    placement: \"bottomRight\"\n  }, __jsx(\"div\", {\n    className: styles.link_login,\n    onClick: e => e.preventDefault()\n  }, __jsx(\"div\", {\n    className: styles.btn\n  }, __jsx(\"span\", null, curUser.attributes.username), __jsx(\"i\", {\n    className: \"iconfont icon-down\",\n    style: {\n      fontSize: 12\n    }\n  })))) : __jsx(Login, null, __jsx(\"p\", {\n    className: styles.nav_login\n  }, \"\\u767B\\u5F55/\\u6CE8\\u518C\")))), curMenu && curMenu.children && __jsx(\"div\", {\n    className: styles.nav2\n  }, __jsx(\"div\", {\n    className: styles.nav_link\n  }, __jsx(Link, {\n    href: `/www/alist?cate1=${curMenu.key}`\n  }, __jsx(\"div\", {\n    className: !router.query.cate2 ? styles.nav_link_item_active : styles.nav_link_item\n  }, \"\\u5168\\u90E8\")), curMenu.children.map(obj => {\n    return __jsx(Link, {\n      href: `/www/alist?cate1=${curMenu.key}&cate2=${obj.key}`,\n      key: obj.key\n    }, __jsx(\"div\", {\n      className: router.query.cate2 === obj.key ? styles.nav_link_item_active : styles.nav_link_item,\n      key: obj.key\n    }, obj.title));\n  }))));\n}\n\nexport default Components;","map":null,"metadata":{},"sourceType":"module"}