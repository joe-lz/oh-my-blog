{"ast":null,"code":"import AV from 'leancloud-storage';\nexport const createLike = (params = {}) => {\n  return new Promise((resolve, reject) => {\n    const likes = new AV.Object('CMS_Likes');\n    likes.set('user', AV.User.current());\n    likes.set('article', params.article); // 将对象保存到云端\n\n    likes.save().then(res => {\n      resolve(res);\n    }, error => {\n      // 异常处理\n      reject(error);\n    });\n  });\n};\nexport const deleteLike = (params = {}) => {\n  return new Promise((resolve, reject) => {\n    params.item.destroy().then(() => {\n      resolve();\n    });\n  });\n};\nexport const countLike = (params = {}) => {\n  return new Promise((resolve, reject) => {\n    const query = new AV.Query('CMS_Likes'); // query.equalTo('user', AV.User.current())\n\n    query.equalTo('article', params.article);\n    query.count().then(number => {\n      resolve(number);\n    });\n  });\n};\nexport const getMyLike = (params = {}) => {\n  return new Promise((resolve, reject) => {\n    const query = new AV.Query('CMS_Likes');\n    query.equalTo('user', AV.User.current());\n    query.equalTo('article', params.article);\n    query.first().then(res => {\n      resolve(res);\n    }).catch(err => {\n      reject(err);\n    });\n  });\n};","map":null,"metadata":{},"sourceType":"module"}