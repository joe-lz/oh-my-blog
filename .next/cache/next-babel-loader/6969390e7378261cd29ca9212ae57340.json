{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar __jsx = React.createElement;\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport AV from 'leancloud-storage';\nimport dayjs from 'dayjs';\nimport { FileImageOutlined, LoadingOutlined, PlusOutlined } from '@ant-design/icons';\nimport React, { useState, useEffect } from 'react';\nimport { Tree, Button, notification, Input, Modal, Upload, message } from 'antd';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport styles from './index.module.scss';\nimport { createAssets, getAssetsList } from 'src/service/assets';\n\nfunction Components(props) {\n  var _useState = useState([]),\n      imageLists = _useState[0],\n      setimageLists = _useState[1];\n\n  var _useState2 = useState([]),\n      imageListsTrash = _useState2[0],\n      setimageListsTrash = _useState2[1];\n\n  var beforeUpload = function beforeUpload(file) {\n    var isLt1M, res;\n    return _regeneratorRuntime.async(function beforeUpload$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            isLt1M = file.size / 1024 / 1024 < 1;\n\n            if (isLt1M) {\n              _context.next = 4;\n              break;\n            }\n\n            // message.error(file.name + \"图片大小超出1Mno限制，请修改后重新上传\", 0.8);\n            notification.error({\n              message: \"\\u56FE\\u7247\\u5927\\u5C0F\\u8D85\\u51FA1M\\u9650\\u5236\\uFF0C\\u8BF7\\u4FEE\\u6539\\u540E\\u91CD\\u65B0\\u4E0A\\u4F20\" // description: leanerrors[error.code] ? leanerrors[error.code].msg : \"\",\n\n            });\n            return _context.abrupt(\"return\", isLt1M);\n\n          case 4:\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(createAssets({\n              e: file\n            }));\n\n          case 6:\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(getAssetsList());\n\n          case 8:\n            res = _context.sent;\n            setimageLists(res);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleChange = function handleChange() {}; // 删除图片\n  // const handleDel = async (file) => {\n  //   file.destroy();\n  //   // 获取图片列表\n  //   const res = await getAssetsList();\n  //   setimageLists(res);\n  // };\n\n\n  useEffect(function () {\n    function fetchData() {\n      var res;\n      return _regeneratorRuntime.async(function fetchData$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(getAssetsList());\n\n            case 2:\n              res = _context2.sent;\n              setimageLists(res);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    fetchData();\n  }, []);\n  return __jsx(\"div\", {\n    className: styles.assets,\n    style: props.onChoose ? {\n      height: 600,\n      overflow: 'hidden',\n      overflowY: 'scroll'\n    } : {}\n  }, __jsx(\"div\", {\n    className: \"_admin_body_section_block\",\n    style: props.onChoose ? {\n      marginBottom: 0,\n      borderBottom: '1px solid rgba(0,0,0,0.1)',\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 10000,\n      width: '100%'\n    } : {}\n  }, __jsx(\"div\", {\n    className: \"_admin_body_section_block_nav\"\n  }, __jsx(\"span\", {\n    className: \"_admin_body_section_block_nav_item_active\"\n  }, \"\\u5168\\u90E8\"))), __jsx(\"div\", {\n    className: \"_admin_body_section_block\",\n    style: props.onChoose ? {\n      boxShadow: 'none'\n    } : {}\n  }, __jsx(\"div\", {\n    className: styles.assets_body,\n    style: props.onChoose ? {\n      paddingTop: 60\n    } : {}\n  }, __jsx(\"div\", {\n    className: styles.assets_imgitem\n  }, __jsx(Upload, {\n    name: \"avatar\",\n    listType: \"picture-card\",\n    className: styles.uploader,\n    showUploadList: false,\n    beforeUpload: beforeUpload,\n    onChange: handleChange,\n    accept: \"image/png, image/jpeg, image/jpg\"\n  }, __jsx(\"div\", {\n    className: styles.assets_upload\n  }, \"\\u4E0A\\u4F20\"))), imageLists.map(function (obj) {\n    return __jsx(\"div\", {\n      className: styles.assets_imgitem,\n      key: obj.id,\n      style: {\n        backgroundImage: \"url(\".concat(obj.attributes.url, \")\")\n      }\n    }, __jsx(\"div\", {\n      className: styles.assets_imgitem_content\n    }, props.onChoose ? __jsx(Button, {\n      shape: \"round\",\n      type: \"primary\",\n      onClick: function onClick() {\n        props.onChoose({\n          url: obj.attributes.url\n        });\n      }\n    }, \"\\u9009\\u62E9\\u56FE\\u7247\") : __jsx(CopyToClipboard, {\n      text: obj.attributes.url,\n      onCopy: function onCopy() {\n        notification.success({\n          message: '复制成功' // description: \"请输入用户名、密码\",\n\n        });\n      }\n    }, __jsx(Button, {\n      shape: \"round\"\n    }, \"\\u590D\\u5236\\u56FE\\u7247url\"))));\n  }))));\n}\n\nexport default Components;","map":null,"metadata":{},"sourceType":"module"}