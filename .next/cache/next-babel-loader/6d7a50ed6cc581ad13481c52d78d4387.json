{"ast":null,"code":"import AV from \"leancloud-storage\";\nexport var createProfile = function createProfile() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return new Promise(function (resolve, reject) {\n    // 创建默认菜单\n    var profileObject = new AV.Object(\"CMS_Profile\");\n    profileObject.set(\"logo\", \"https://static.ccrgt.com/images/42bc258e-d183-49d5-aea4-6eb5914647e3.png\");\n    profileObject.set(\"title\", \"oh my blog\");\n    profileObject.set(\"github\", \"https://github.com/joe-lz/oh-my-blog\");\n    profileObject.set(\"copyright\", \"Copyright © 1998 - 2020 oh my blog. All Rights Reserved\");\n    profileObject.set(\"allowAComment\", true);\n    profileObject.set(\"allowBComment\", true);\n    profileObject.set(\"showBlog\", true);\n    profileObject.set(\"blogName\", \"沸点\"); // 将对象保存到云端\n\n    profileObject.save().then(function (todo) {\n      resolve(todo);\n    }, function (error) {\n      reject(err);\n    });\n  });\n};\nexport var getProfileList = function getProfileList() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return new Promise(function (resolve, reject) {\n    var query = new AV.Query(\"CMS_Profile\");\n    query.descending(\"createdAt\");\n    query.first().then(function (res) {\n      resolve(res);\n    })[\"catch\"](function (err) {\n      reject(err);\n    });\n  });\n};\nexport var updateProfile = function updateProfile(_ref) {\n  var profileItem = _ref.profileItem,\n      params = _ref.params;\n  return new Promise(function (resolve, reject) {\n    Object.keys(params).map(function (keyname) {\n      if (keyname === \"views\" || keyname === \"views_uv\") {\n        profileItem.increment(keyname, params[keyname]);\n      } else {\n        profileItem.set(keyname, params[keyname]);\n      }\n    });\n    profileItem.save().then(function (res) {\n      resolve(res);\n    }, function (error) {\n      // 异常处理\n      reject(error);\n    });\n  });\n};","map":null,"metadata":{},"sourceType":"module"}