{"ast":null,"code":"var __jsx = React.createElement;\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport AV from 'leancloud-storage';\nimport dayjs from 'dayjs';\nimport { FileImageOutlined, LoadingOutlined, PlusOutlined } from '@ant-design/icons';\nimport React, { useState, useEffect } from 'react';\nimport { Tree, Button, notification, Input, Modal, Upload, message } from 'antd';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport styles from './index.module.scss';\nimport { createAssets, getAssetsList } from 'src/service/assets';\n\nfunction Components(props) {\n  const {\n    0: imageLists,\n    1: setimageLists\n  } = useState([]);\n  const {\n    0: imageListsTrash,\n    1: setimageListsTrash\n  } = useState([]);\n\n  const beforeUpload = async file => {\n    const isLt1M = file.size / 1024 / 1024 < 1;\n\n    if (!isLt1M) {\n      // message.error(file.name + \"图片大小超出1Mno限制，请修改后重新上传\", 0.8);\n      notification.error({\n        message: `图片大小超出1M限制，请修改后重新上传` // description: leanerrors[error.code] ? leanerrors[error.code].msg : \"\",\n\n      });\n      return isLt1M;\n    }\n\n    await createAssets({\n      e: file\n    });\n    const res = await getAssetsList();\n    setimageLists(res);\n  };\n\n  const handleChange = () => {}; // 删除图片\n  // const handleDel = async (file) => {\n  //   file.destroy();\n  //   // 获取图片列表\n  //   const res = await getAssetsList();\n  //   setimageLists(res);\n  // };\n\n\n  useEffect(() => {\n    async function fetchData() {\n      // 获取图片列表\n      const res = await getAssetsList();\n      setimageLists(res);\n    }\n\n    fetchData();\n  }, []);\n  return __jsx(\"div\", {\n    className: styles.assets,\n    style: props.onChoose ? {\n      height: 600,\n      overflow: 'hidden',\n      overflowY: 'scroll'\n    } : {}\n  }, __jsx(\"div\", {\n    className: \"_admin_body_section_block\",\n    style: props.onChoose ? {\n      marginBottom: 0,\n      borderBottom: '1px solid rgba(0,0,0,0.1)',\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 10000,\n      width: '100%'\n    } : {}\n  }, __jsx(\"div\", {\n    className: \"_admin_body_section_block_nav\"\n  }, __jsx(\"span\", {\n    className: \"_admin_body_section_block_nav_item_active\"\n  }, \"\\u5168\\u90E8\"))), __jsx(\"div\", {\n    className: \"_admin_body_section_block\",\n    style: props.onChoose ? {\n      boxShadow: 'none'\n    } : {}\n  }, __jsx(\"div\", {\n    className: styles.assets_body,\n    style: props.onChoose ? {\n      paddingTop: 60\n    } : {}\n  }, __jsx(\"div\", {\n    className: styles.assets_imgitem\n  }, __jsx(Upload, {\n    name: \"avatar\",\n    listType: \"picture-card\",\n    className: styles.uploader,\n    showUploadList: false,\n    beforeUpload: beforeUpload,\n    onChange: handleChange,\n    accept: \"image/png, image/jpeg, image/jpg\"\n  }, __jsx(\"div\", {\n    className: styles.assets_upload\n  }, \"\\u4E0A\\u4F20\"))), imageLists.map(obj => {\n    return __jsx(\"div\", {\n      className: styles.assets_imgitem,\n      key: obj.id,\n      style: {\n        backgroundImage: `url(${obj.attributes.url})`\n      }\n    }, __jsx(\"div\", {\n      className: styles.assets_imgitem_content\n    }, props.onChoose ? __jsx(Button, {\n      shape: \"round\",\n      type: \"primary\",\n      onClick: () => {\n        props.onChoose({\n          url: obj.attributes.url\n        });\n      }\n    }, \"\\u9009\\u62E9\\u56FE\\u7247\") : __jsx(CopyToClipboard, {\n      text: obj.attributes.url,\n      onCopy: () => {\n        notification.success({\n          message: '复制成功' // description: \"请输入用户名、密码\",\n\n        });\n      }\n    }, __jsx(Button, {\n      shape: \"round\"\n    }, \"\\u590D\\u5236\\u56FE\\u7247url\"))));\n  }))));\n}\n\nexport default Components;","map":null,"metadata":{},"sourceType":"module"}